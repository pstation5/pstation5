<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>Horror | PS4 | PS5 Collection</title>

  <link rel="icon" href="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20100%20100'%3E%3Ctext%20y='.9em'%20font-size='90'%3E%F0%9F%91%BB%3C/text%3E%3C/svg%3E">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <link rel="stylesheet" href="style.css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
</head>

<body>
  <div class="app-container">
    <!-- Header -->
    <header class="header">
      <div class="header-top">
        <h1 class="main-title">
          <i class="fas fa-ghost"></i>
          Horror | PS4 | PS5
        </h1>
        <div class="user-section">
          <div class="user-profile">
            <img id="userAvatar" class="user-avatar" alt="Avatar" src=""/>
            <div class="user-info">
              <span id="userGreeting" class="user-name">Гость</span>
              <span id="userRole" class="user-status">Войдите через Telegram</span>
            </div>
          </div>
          <button class="theme-toggle" onclick="toggleTheme()" title="Смена темы">
            <i class="fas fa-moon" id="themeIcon"></i>
          </button>
        </div>
      </div>
      
      <div class="search-container">
        <div class="search-box">
          <i class="fas fa-search"></i>
          <input id="searchInput" type="text" placeholder="Поиск игр..."/>
          <button id="searchButton" class="search-btn">
            <i class="fas fa-search"></i>
          </button>
        </div>
      </div>
    </header>

    <!-- Upcoming Games Slider -->
    <section class="upcoming-section">
      <div class="section-header">
        <h2><i class="fas fa-calendar-star"></i> Ожидаемые игры</h2>
        <div id="adminControls" style="display: none;">
          <button class="add-btn" onclick="openAddUpcomingModal()">
            <i class="fas fa-plus"></i> Добавить
          </button>
        </div>
      </div>
      
      <div class="swiper upcoming-swiper">
        <div class="swiper-wrapper" id="upcomingGamesSlider"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-pagination"></div>
      </div>
    </section>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Filters -->
      <div class="filters-section">
        <div class="filter-group">
          <h3><i class="fas fa-filter"></i> Фильтры</h3>
          <div class="filter-buttons">
            <button class="filter-btn active" onclick="filterByPlatform('all')">Все</button>
            <button class="filter-btn" onclick="filterByPlatform('ps5')">PS5</button>
            <button class="filter-btn" onclick="filterByPlatform('ps4')">PS4</button>
            <button class="filter-btn" onclick="showPhysicalOnly()">
              <i class="fas fa-compact-disc"></i> Только диски
            </button>
          </div>
        </div>
        
        <div class="sort-group">
          <h3><i class="fas fa-sort"></i> Сортировка</h3>
          <select id="sortSelect" onchange="applyFilters()">
            <option value="title">По названию (А-Я)</option>
            <option value="title-desc">По названию (Я-А)</option>
            <option value="year">По году (новые)</option>
            <option value="year-old">По году (старые)</option>
            <option value="rating">По рейтингу</option>
          </select>
        </div>
      </div>

      <!-- Stats -->
      <div class="stats">
        <div class="stat-item">
          <i class="fas fa-gamepad"></i>
          <div class="stat-number" id="totalGames">0</div>
          <div class="stat-label">Всего игр</div>
        </div>
        <div class="stat-item">
          <i class="fas fa-trophy"></i>
          <div class="stat-number" id="completedGames">0</div>
          <div class="stat-label">Пройдено</div>
        </div>
        <div class="stat-item">
          <i class="fas fa-spinner"></i>
          <div class="stat-number" id="inProgress">0</div>
          <div class="stat-label">В процессе</div>
        </div>
        <div class="stat-item">
          <i class="fas fa-users"></i>
          <div class="stat-number" id="totalUsers">0</div>
          <div class="stat-label">Коллекционеров</div>
        </div>
      </div>

      <!-- Games Grid -->
      <div class="games-section">
        <div class="section-header">
          <h2><i class="fas fa-archive"></i> Коллекция игр</h2>
          <div id="adminControls2" style="display: none;">
            <button class="add-btn" onclick="openAddGameModal()">
              <i class="fas fa-plus"></i> Добавить игру
            </button>
          </div>
        </div>
        
        <div class="game-grid" id="gameGrid">
          <!-- Games will be loaded here -->
        </div>
        
        <!-- Pagination -->
        <div class="pagination">
          <button class="page-btn" onclick="prevPage()" id="prevBtn">
            <i class="fas fa-chevron-left"></i>
          </button>
          <div class="page-numbers" id="pageNumbers"></div>
          <button class="page-btn" onclick="nextPage()" id="nextBtn">
            <i class="fas fa-chevron-right"></i>
          </button>
        </div>
      </div>
    </main>
  </div>

  <!-- Modals -->
  
  <!-- Add Game Modal -->
  <div class="modal" id="addGameModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2><i class="fas fa-plus-circle"></i> Добавить игру в коллекцию</h2>
        <button class="close-modal" onclick="closeAddGameModal()">&times;</button>
      </div>
      <div class="modal-body">
        <form id="addGameForm">
          <div class="form-group">
            <label>Название игры *</label>
            <input type="text" id="gameTitle" required>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label>Платформа *</label>
              <select id="gamePlatform" required>
                <option value="">Выберите</option>
                <option value="ps5">PlayStation 5</option>
                <option value="ps4">PlayStation 4</option>
              </select>
            </div>
            
            <div class="form-group">
              <label>Год выхода *</label>
              <input type="number" id="gameYear" min="1994" max="2024" required>
            </div>
          </div>
          
          <div class="form-group">
            <label>URL обложки *</label>
            <input type="url" id="gameCover" required placeholder="https://example.com/image.jpg">
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label>Разработчик</label>
              <input type="text" id="gameDeveloper">
            </div>
            
            <div class="form-group">
              <label>Жанр</label>
              <select id="gameGenre">
                <option value="survival-horror">Survival Horror</option>
                <option value="psychological">Psychological Horror</option>
                <option value="action-horror">Action Horror</option>
                <option value="sci-fi-horror">Sci-Fi Horror</option>
              </select>
            </div>
          </div>
          
          <div class="form-group">
            <label>Статус</label>
            <select id="gameStatus">
              <option value="not-started">Не начата</option>
              <option value="in-progress">В процессе</option>
              <option value="completed">Пройдена</option>
            </select>
          </div>
          
          <div class="form-group">
            <label>Физический диск?</label>
            <div class="checkbox-group">
              <input type="checkbox" id="isPhysical" checked>
              <label for="isPhysical">Да, у меня есть диск</label>
            </div>
          </div>
          
          <div class="form-group">
            <label>Описание</label>
            <textarea id="gameDescription" rows="4"></textarea>
          </div>
          
          <div class="modal-actions">
            <button type="button" class="btn-secondary" onclick="closeAddGameModal()">Отмена</button>
            <button type="submit" class="btn-primary">Добавить игру</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Add Upcoming Game Modal -->
  <div class="modal" id="addUpcomingModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2><i class="fas fa-calendar-plus"></i> Добавить ожидаемую игру</h2>
        <button class="close-modal" onclick="closeAddUpcomingModal()">&times;</button>
      </div>
      <div class="modal-body">
        <form id="addUpcomingForm">
          <div class="form-group">
            <label>Название игры *</label>
            <input type="text" id="upcomingTitle" required>
          </div>
          
          <div class="form-group">
            <label>URL обложки *</label>
            <input type="url" id="upcomingCover" required>
          </div>
          
          <div class="form-group">
            <label>Дата выхода *</label>
            <input type="date" id="upcomingDate" required>
          </div>
          
          <div class="form-group">
            <label>Разработчик</label>
            <input type="text" id="upcomingDeveloper">
          </div>
          
          <div class="form-group">
            <label>Жанр</label>
            <select id="upcomingGenre">
              <option value="survival-horror">Survival Horror</option>
              <option value="psychological">Psychological Horror</option>
            </select>
          </div>
          
          <div class="form-group">
            <label>Платформы</label>
            <div class="checkbox-group">
              <div>
                <input type="checkbox" id="platformPs5" checked>
                <label for="platformPs5">PS5</label>
              </div>
              <div>
                <input type="checkbox" id="platformPs4">
                <label for="platformPs4">PS4</label>
              </div>
            </div>
          </div>
          
          <div class="modal-actions">
            <button type="button" class="btn-secondary" onclick="closeAddUpcomingModal()">Отмена</button>
            <button type="submit" class="btn-primary">Добавить</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Game Detail Modal -->
  <div class="modal large-modal" id="gameDetailModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="detailTitle"></h2>
        <button class="close-modal" onclick="closeGameDetailModal()">&times;</button>
      </div>
      <div class="modal-body" id="gameDetailContent">
        <!-- Content loaded dynamically -->
      </div>
    </div>
  </div>

  <!-- Share Modal -->
  <div class="modal" id="shareModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2><i class="fas fa-share-alt"></i> Поделиться игрой</h2>
        <button class="close-modal" onclick="closeShareModal()">&times;</button>
      </div>
      <div class="modal-body">
        <p id="shareMessage"></p>
        <div class="share-buttons">
          <button class="share-btn" onclick="shareToTelegram()">
            <i class="fab fa-telegram"></i> Telegram
          </button>
          <button class="share-btn" onclick="copyShareLink()">
            <i class="fas fa-copy"></i> Копировать ссылку
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
